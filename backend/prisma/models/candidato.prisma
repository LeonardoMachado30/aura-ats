enum AreaCandidato {
    MEDICINA
    ENFERMAGEM
    OUTRO
}

model Especialidade {
    id        Int         @id @default(autoincrement())
    nome      String      @unique
    sigla     String
    candidato Candidato[]
}

model Candidato {
    id    String  @id @default(uuid())
    crm   String?
    corem String?
    rqe   String?

    areaCandidato AreaCandidato

    vagas           Vaga[]
    formacoes       Formacao[]
    CandidaturaVaga CandidaturaVaga[]
    habilidades     CandidatoHabilidade[]

    pessoaId String @unique
    pessoa   Pessoa @relation(fields: [pessoaId], references: [id])

    especialidade   Especialidade? @relation(fields: [especialidadeId], references: [id])
    especialidadeId Int?
}

model Formacao {
    id                   String    @id @default(uuid())
    instituicao          String?   @default("A definir")
    curso                String?   @default("A definir")
    dataInicio           DateTime?
    dataFim              DateTime?
    dataInicioResidencia DateTime?
    dataFimResidencia    DateTime?

    Candidato   Candidato? @relation(fields: [candidatoId], references: [id])
    candidatoId String?
}

model CandidatoHabilidade {
    candidatoId     String
    habilidadeId    String
    nivel           String?
    experienciaAnos Int?

    candidato  Candidato  @relation(fields: [candidatoId], references: [id])
    habilidade Habilidade @relation(fields: [habilidadeId], references: [id])

    @@id([candidatoId, habilidadeId])
}
