model Vaga {
  id                String            @id @default(uuid())
  titulo            String
  descricao         String
  requisitos        String?
  responsabilidades String?
  dataPublicacao    DateTime          @default(now())
  dataFechamento    DateTime?
  create_at         DateTime          @default(now())
  update_at         DateTime          @updatedAt
  categoria         CategoriaVaga
  status            StatusVaga
  tipoContrato      TipoContrato?
  nivelExperiencia  NivelExperiencia?
  areaCandidato     AreaCandidato?
  clienteId         String?
  localizacaoId     String?
  salario           Float?
  tipoSalario       String?
  agendaVaga        AgendaVaga[]
  beneficios        Beneficio[]
  CandidaturaVaga   CandidaturaVaga[]
  cliente           Cliente?          @relation(fields: [clienteId], references: [id])
  localizacao       Localizacao?      @relation(fields: [localizacaoId], references: [id])
  anexos            VagaAnexo[]
  habilidades       VagaHabilidade[]
  candidatos        Candidato[]       @relation("CandidatoToVaga")
}

model VagaHabilidade {
  nivelExigido String?
  vagaId       String
  habilidadeId String
  habilidade   Habilidade @relation(fields: [habilidadeId], references: [id])
  vaga         Vaga       @relation(fields: [vagaId], references: [id])

  @@id([vagaId, habilidadeId])
}

model CandidaturaVaga {
  id            String                 @id @default(uuid())
  candidatoId   String
  vagaId        String
  status        StatusCandidatura      @default(APLICADO)
  dataAplicacao DateTime               @default(now())
  observacoes   String?
  etapaAtualId  String?
  candidato     Candidato              @relation(fields: [candidatoId], references: [id])
  etapaAtual    ProcessoSeletivoEtapa? @relation(fields: [etapaAtualId], references: [id])
  vaga          Vaga                   @relation(fields: [vagaId], references: [id])

  @@unique([candidatoId, vagaId])
}

model Anexo {
  id          String      @id @default(uuid())
  nomeArquivo String
  url         String
  tipo        String?
  tamanhoKb   Int?
  vagas       VagaAnexo[]
}

model VagaAnexo {
  vagaId  String
  anexoId String
  anexo   Anexo  @relation(fields: [anexoId], references: [id])
  vaga    Vaga   @relation(fields: [vagaId], references: [id])

  @@id([vagaId, anexoId])
}

model Beneficio {
  id        String  @id @default(uuid())
  nome      String  @unique
  descricao String?
  vagaId    String?
  vaga      Vaga?   @relation(fields: [vagaId], references: [id])
}

enum CategoriaVaga {
  TECNOLOGIA
  SAUDE
  ADMINISTRATIVO
  FINANCEIRO
  RECURSOS_HUMANOS
  MARKETING
  VENDAS
  OUTROS
}

enum StatusVaga {
  ATIVA
  PAUSADA
  ENCERRADA
  ARQUIVADA
}

enum TipoContrato {
  CLT
  PJ
  ESTAGIO
  FREELANCER
  TEMPORARIO
}

enum NivelExperiencia {
  ESTAGIO
  JUNIOR
  PLENO
  SENIOR
  ESPECIALISTA
  GERENTE
}

enum TipoEtapa {
  APLICACAO
  TRIAGEM
  TESTE
  ENTREVISTA
  OFERTA
  CONTRATACAO
}

enum StatusCandidatura {
  APLICADO
  EM_ANALISE
  ENTREVISTA_AGENDADA
  ENTREVISTA_CONCLUIDA
  OFERTA_ENVIADA
  OFERTA_ACEITA
  OFERTA_RECUSADA
  DESCLASSIFICADO
  CONTRATADO
}
